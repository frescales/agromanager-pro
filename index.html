<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroManager Pro - Sistema de Gestión Agrícola</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span>🌾</span>
                <span>AgroManager Pro</span>
            </div>
            <nav>
                <ul class="nav-menu">
                    <li><a href="#dashboard">Dashboard</a></li>
                    <li><a href="#campos">Campos</a></li>
                    <li><a href="#cultivos">Cultivos</a></li>
                    <li><a href="#reportes">Reportes</a></li>
                    <li><a href="#configuracion">Configuración</a></li>
                </ul>
            </nav>
            <div class="user-profile">
                <div class="user-avatar">JD</div>
                <span>Juan Díaz</span>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="#dashboard" class="active"><span>📊</span> Dashboard</a></li>
                <li><a href="#campos"><span>🌱</span> Mis Campos</a></li>
                <li><a href="#cultivos"><span>🌾</span> Cultivos</a></li>
                <li><a href="#actividades"><span>📝</span> Actividades</a></li>
                <li><a href="#inventario"><span>📦</span> Inventario</a></li>
                <li><a href="#finanzas"><span>💰</span> Finanzas</a></li>
                <li><a href="#clima"><span>☁️</span> Clima</a></li>
                <li><a href="#alertas"><span>⚠️</span> Alertas</a></li>
                <li><a href="#reportes"><span>📈</span> Reportes</a></li>
                <li><a href="#trazabilidad"><span>🔍</span> Trazabilidad</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Page Header -->
            <div class="page-header fade-in">
                <h1 class="page-title">Dashboard</h1>
                <p class="page-subtitle">Resumen de tu operación agrícola</p>
            </div>

            <!-- Weather Widget -->
            <div class="weather-widget fade-in">
                <div class="weather-header">
                    <div>
                        <h3>Clima Actual</h3>
                        <p>Ubicación: Finca Santa María</p>
                    </div>
                    <div class="weather-temp">24°C</div>
                </div>
                <div class="weather-details">
                    <div class="weather-detail">
                        <div>💧</div>
                        <div>Humedad</div>
                        <div><strong>65%</strong></div>
                    </div>
                    <div class="weather-detail">
                        <div>💨</div>
                        <div>Viento</div>
                        <div><strong>12 km/h</strong></div>
                    </div>
                    <div class="weather-detail">
                        <div>🌧️</div>
                        <div>Precipitación</div>
                        <div><strong>2mm</strong></div>
                    </div>
                    <div class="weather-detail">
                        <div>☀️</div>
                        <div>UV Index</div>
                        <div><strong>6</strong></div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Stats -->
            <div class="dashboard-grid">
                <div class="stat-card fade-in">
                    <div class="stat-card-header">
                        <div>
                            <div class="stat-value">150</div>
                            <div class="stat-label">Hectáreas Totales</div>
                            <div class="stat-change positive">
                                <span>↑</span>
                                <span>+5% vs año anterior</span>
                            </div>
                        </div>
                        <div class="stat-icon">🌱</div>
                    </div>
                </div>

                <div class="stat-card fade-in">
                    <div class="stat-card-header">
                        <div>
                            <div class="stat-value">3</div>
                            <div class="stat-label">Cultivos Activos</div>
                            <div class="stat-change positive">
                                <span>✓</span>
                                <span>Todos saludables</span>
                            </div>
                        </div>
                        <div class="stat-icon">🌾</div>
                    </div>
                </div>

                <div class="stat-card fade-in">
                    <div class="stat-card-header">
                        <div>
                            <div class="stat-value">85%</div>
                            <div class="stat-label">Eficiencia de Riego</div>
                            <div class="stat-change positive">
                                <span>↑</span>
                                <span>+12% mejora</span>
                            </div>
                        </div>
                        <div class="stat-icon">💧</div>
                    </div>
                </div>

                <div class="stat-card fade-in">
                    <div class="stat-card-header">
                        <div>
                            <div class="stat-value">$45.2k</div>
                            <div class="stat-label">Ingresos del Mes</div>
                            <div class="stat-change positive">
                                <span>↑</span>
                                <span>+18% vs mes anterior</span>
                            </div>
                        </div>
                        <div class="stat-icon">💰</div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="chart-container fade-in">
                <div class="chart-header">
                    <h3>Rendimiento de Cultivos</h3>
                    <button class="btn btn-secondary">Ver Detalles</button>
                </div>
                <div class="chart-placeholder">
                    <span>Gráfico de Rendimiento (Canvas/Chart.js)</span>
                </div>
            </div>

            <!-- IoT Sensors Section -->
            <div class="activity-feed fade-in">
                <div class="activity-header">
                    <h3>🔌 Sensores IoT en Tiempo Real</h3>
                    <button class="btn btn-secondary">Configurar Sensores</button>
                </div>
                <div class="iot-sensors-grid">
                    <div class="sensor-card">
                        <div class="sensor-icon">🌡️</div>
                        <div class="sensor-value">24.5°C</div>
                        <div class="sensor-label">Temperatura del Suelo</div>
                        <div><span class="sensor-status active"></span>Activo</div>
                    </div>
                    <div class="sensor-card">
                        <div class="sensor-icon">💧</div>
                        <div class="sensor-value">42%</div>
                        <div class="sensor-label">Humedad del Suelo</div>
                        <div><span class="sensor-status active"></span>Activo</div>
                    </div>
                    <div class="sensor-card">
                        <div class="sensor-icon">☀️</div>
                        <div class="sensor-value">850 W/m²</div>
                        <div class="sensor-label">Radiación Solar</div>
                        <div><span class="sensor-status active"></span>Activo</div>
                    </div>
                    <div class="sensor-card">
                        <div class="sensor-icon">🌬️</div>
                        <div class="sensor-value">6.8</div>
                        <div class="sensor-label">pH del Suelo</div>
                        <div><span class="sensor-status warning"></span>Revisar</div>
                    </div>
                    <div class="sensor-card">
                        <div class="sensor-icon">⚡</div>
                        <div class="sensor-value">1.2 mS/cm</div>
                        <div class="sensor-label">Conductividad</div>
                        <div><span class="sensor-status active"></span>Activo</div>
                    </div>
                    <div class="sensor-card">
                        <div class="sensor-icon">🌿</div>
                        <div class="sensor-value">180 ppm</div>
                        <div class="sensor-label">Nitrógeno</div>
                        <div><span class="sensor-status active"></span>Activo</div>
                    </div>
                </div>
            </div>

            <!-- Satellite Map Section -->
            <div class="map-container fade-in">
                <div class="activity-header">
                    <h3>🛰️ Mapas Satelitales de Campos</h3>
                    <button class="btn btn-primary">Actualizar Imágenes</button>
                </div>
                <div class="map-placeholder">
                    <div class="map-overlay">
                        <div class="map-controls">
                            <button class="map-control-btn active" onclick="changeMapView('satellite')">Satélite</button>
                            <button class="map-control-btn" onclick="changeMapView('ndvi')">NDVI</button>
                            <button class="map-control-btn" onclick="changeMapView('moisture')">Humedad</button>
                            <button class="map-control-btn" onclick="changeMapView('stress')">Estrés Hídrico</button>
                        </div>
                    </div>
                    <canvas id="fieldMap" style="width: 100%; height: 100%;"></canvas>
                </div>
                <div class="field-analysis">
                    <h4>Análisis NDVI - Campo Norte</h4>
                    <div class="ndvi-scale"></div>
                    <div class="ndvi-indicator">
                        <div class="ndvi-marker" style="left: 75%;"></div>
                    </div>
                    <div class="field-metrics">
                        <div class="metric-item">
                            <div class="metric-value">0.75</div>
                            <div class="metric-label">Índice NDVI</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">92%</div>
                            <div class="metric-label">Cobertura Vegetal</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">15 ha</div>
                            <div class="metric-label">Área Analizada</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">Buena</div>
                            <div class="metric-label">Salud del Cultivo</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Predictions Section -->
            <div class="ai-predictions fade-in">
                <div class="activity-header">
                    <h3>🤖 Análisis Predictivo con IA</h3>
                    <button class="btn btn-secondary">Ver Modelos</button>
                </div>
                
                <div class="prediction-card">
                    <div class="prediction-header">
                        <div>
                            <strong>Predicción de Rendimiento</strong>
                            <p>Cosecha estimada para Maíz - Campo Norte</p>
                        </div>
                        <div class="prediction-confidence">
                            <span>Confianza:</span>
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: 85%;"></div>
                            </div>
                            <span>85%</span>
                        </div>
                    </div>
                    <p>📊 Rendimiento esperado: <strong>8.5 ton/ha</strong> (+12% vs promedio histórico)</p>
                    <p>📅 Fecha óptima de cosecha: <strong>15-20 de Marzo</strong></p>
                </div>

                <div class="prediction-card">
                    <div class="prediction-header">
                        <div>
                            <strong>Riesgo de Plagas</strong>
                            <p>Análisis basado en condiciones climáticas y historial</p>
                        </div>
                        <div class="prediction-confidence">
                            <span>Confianza:</span>
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: 78%;"></div>
                            </div>
                            <span>78%</span>
                        </div>
                    </div>
                    <p>⚠️ Riesgo moderado de <strong>Spodoptera frugiperda</strong> en próximos 7 días</p>
                    <p>💡 Recomendación: Monitoreo intensivo y preparar aplicación preventiva</p>
                </div>

                <div class="prediction-card">
                    <div class="prediction-header">
                        <div>
                            <strong>Optimización de Riego</strong>
                            <p>Basado en pronóstico y sensores de humedad</p>
                        </div>
                        <div class="prediction-confidence">
                            <span>Confianza:</span>
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: 92%;"></div>
                            </div>
                            <span>92%</span>
                        </div>
                    </div>
                    <p>💧 Reducir riego en <strong>30%</strong> próximos 3 días</p>
                    <p>🌧️ Precipitación esperada: <strong>15-20mm</strong></p>
                    <p>💰 Ahorro estimado: <strong>$450 USD</strong></p>
                </div>
            </div>

            <!-- Activity Feed -->
            <div class="activity-feed fade-in">
                <div class="activity-header">
                    <h3>Actividades Recientes</h3>
                    <button class="btn btn-primary" onclick="openModal()">
                        <span>+</span>
                        <span>Nueva Actividad</span>
                    </button>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon">🌱</div>
                    <div class="activity-content">
                        <div class="activity-title">Siembra completada en Campo Norte</div>
                        <div class="activity-time">Hace 2 horas</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">💧</div>
                    <div class="activity-content">
                        <div class="activity-title">Sistema de riego activado - Sector A</div>
                        <div class="activity-time">Hace 4 horas</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">⚠️</div>
                    <div class="activity-content">
                        <div class="activity-title">Alerta: Posible plaga detectada en Campo Sur</div>
                        <div class="activity-time">Hace 6 horas</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">📦</div>
                    <div class="activity-content">
                        <div class="activity-title">Inventario actualizado: Fertilizante NPK agregado</div>
                        <div class="activity-time">Hace 1 día</div>
                    </div>
                </div>

                <div class="activity-item">
                    <div class="activity-icon">✅</div>
                    <div class="activity-content">
                        <div class="activity-title">Inspección de calidad completada</div>
                        <div class="activity-time">Hace 2 días</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Alert System -->
    <div class="alert-system" id="alertSystem">
        <!-- Alerts will be dynamically added here -->
    </div>

    <!-- Modal -->
    <div class="modal" id="activityModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nueva Actividad</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form>
                <div class="form-group">
                    <label class="form-label">Tipo de Actividad</label>
                    <select class="form-control">
                        <option>Siembra</option>
                        <option>Riego</option>
                        <option>Fertilización</option>
                        <option>Control de Plagas</option>
                        <option>Cosecha</option>
                        <option>Mantenimiento</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Campo</label>
                    <select class="form-control">
                        <option>Campo Norte</option>
                        <option>Campo Sur</option>
                        <option>Campo Este</option>
                        <option>Campo Oeste</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Fecha</label>
                    <input type="date" class="form-control" value="2024-01-15">
                </div>
                <div class="form-group">
                    <label class="form-label">Descripción</label>
                    <textarea class="form-control" rows="3" placeholder="Describe la actividad..."></textarea>
                </div>
                <div class="form-group">
                    <button type="button" class="btn btn-primary" onclick="saveActivity()">Guardar Actividad</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>